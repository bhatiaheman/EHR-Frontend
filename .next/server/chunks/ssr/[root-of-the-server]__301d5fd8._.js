module.exports=[14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},76479,a=>{"use strict";a.s(["default",()=>o],76479);var b=a.i(87924),c=a.i(72131),d=a.i(33217),e=a.i(70025),f=a.i(11508),g=a.i(6704),h=a.i(83490),i=a.i(40695),j=a.i(5522);function k({patient:a,onClose:d,onSubmit:e}){let[f,g]=(0,c.useState)({...a,firstName:a.name.split(" ").slice(0,-1).join(" ")||"",lastName:a.name.split(" ").pop()||"",birthDate:a.birthDate||"",phone:a.phone||"",email:a.email||"",conditions:[],allergies:[],medications:[],immunizations:[],lastVisit:"",status:a.status||"Active"}),[h,k]=(0,c.useState)({});return(0,b.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,b.jsxs)("div",{className:"bg-white rounded-lg w-[90%] max-w-md p-6 relative",children:[(0,b.jsx)(i.Button,{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",onClick:d,variant:"ghost",children:"X"}),(0,b.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:a.id?`${a.name} Details`:"Add Patient"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"font-medium text-gray-600",children:"First Name"}),(0,b.jsx)(j.Input,{type:"text",value:f.firstName,onChange:a=>g({...f,firstName:a.target.value}),className:"border rounded px-2 py-1 w-full"}),h.firstName&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:h.firstName})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"font-medium text-gray-600",children:"Last Name"}),(0,b.jsx)(j.Input,{type:"text",value:f.lastName,onChange:a=>g({...f,lastName:a.target.value}),className:"border rounded px-2 py-1 w-full"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"font-medium text-gray-600",children:"Birth Date"}),(0,b.jsx)(j.Input,{type:"date",value:f.birthDate,onChange:a=>g({...f,birthDate:a.target.value}),className:"border rounded px-2 py-1 w-full"}),h.birthDate&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:h.birthDate})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"font-medium text-gray-600",children:"Gender"}),(0,b.jsxs)("select",{value:f.gender,onChange:a=>g({...f,gender:a.target.value}),className:"border rounded px-2 py-1 w-full",children:[(0,b.jsx)("option",{value:"",children:"Select..."}),(0,b.jsx)("option",{value:"male",children:"Male"}),(0,b.jsx)("option",{value:"female",children:"Female"}),(0,b.jsx)("option",{value:"other",children:"Other"}),(0,b.jsx)("option",{value:"unknown",children:"Unknown"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"font-medium text-gray-600",children:"Phone"}),(0,b.jsx)(j.Input,{type:"text",value:f.phone,onChange:a=>g({...f,phone:a.target.value}),className:"border rounded px-2 py-1 w-full",placeholder:"e.g., 202-555-0123"}),h.phone&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:h.phone})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"font-medium text-gray-600",children:"Email"}),(0,b.jsx)(j.Input,{type:"text",value:f.email,onChange:a=>g({...f,email:a.target.value}),className:"border rounded px-2 py-1 w-full",placeholder:"e.g., john.doe@hospital.com"}),h.email&&(0,b.jsx)("p",{className:"text-red-500 text-sm",children:h.email})]})]}),(0,b.jsx)(i.Button,{className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white",onClick:()=>{(()=>{let a={};return f.firstName?f.firstName.length>100&&(a.firstName="First name must be 100 characters or less"):a.firstName="First name is required",f.phone&&!/^\d{3}-\d{3}-\d{4}$/.test(f.phone)&&(a.phone="Phone must be in format XXX-XXX-XXXX (e.g., 202-555-0123)"),f.email&&!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(f.email)&&(a.email="Email must be a valid address (e.g., name@domain.com)"),f.birthDate||(a.birthDate="Birth date is required"),k(a),0===Object.keys(a).length})()&&e({...f,name:`${f.firstName} ${f.lastName}`.trim(),contact:f.phone||f.email||"",age:f.birthDate?new Date().getFullYear()-new Date(f.birthDate).getFullYear():0,conditions:[],allergies:[],medications:[],immunizations:[],lastVisit:""})},children:a.id?"Update":"Add"})]})})}var l=a.i(74362),m=a.i(38246);function n({patients:a,onEdit:d}){let[e,f]=(0,c.useState)(1),g=Math.ceil(a.length/10),h=(e-1)*10,i=a.slice(h,h+10);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"overflow-x-auto border rounded-lg shadow-md",children:(0,b.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,b.jsx)("thead",{className:"bg-gray-100",children:(0,b.jsx)("tr",{children:["ID","Name","Age","Gender","Contact","Actions"].map(a=>(0,b.jsx)("th",{className:"px-4 py-2 text-left text-gray-700 uppercase text-sm font-medium",children:a},a))})}),(0,b.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsx)("td",{className:"px-4 py-2",children:a.id}),(0,b.jsx)("td",{className:"px-4 py-2",children:(0,b.jsx)(m.default,{href:`/dashboard/patients/${a.id}`,className:"text-blue-600 hover:underline",children:a.name})}),(0,b.jsx)("td",{className:"px-4 py-2",children:a.age}),(0,b.jsx)("td",{className:"px-4 py-2",children:a.gender}),(0,b.jsx)("td",{className:"px-4 py-2",children:a.contact}),(0,b.jsx)("td",{className:"px-4 py-2",children:(0,b.jsx)(l.HiOutlineEye,{size:22,className:"cursor-pointer text-gray-600 hover:text-blue-500",onClick:()=>d(a)})})]},a.id))})]})}),(0,b.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",h+1,"â€“",Math.min(h+10,a.length)," of"," ",a.length]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{disabled:1===e,onClick:()=>f(a=>a-1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),Array.from({length:g},(a,c)=>(0,b.jsx)("button",{onClick:()=>f(c+1),className:`px-3 py-1 border rounded ${e===c+1?"bg-blue-500 text-white":""}`,children:c+1},c)),(0,b.jsx)("button",{disabled:e===g,onClick:()=>f(a=>a+1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})}let o=()=>{let[a,j]=(0,c.useState)(!1),[l,m]=(0,c.useState)(null),{data:o,isLoading:p,error:q}=(0,d.useQuery)({queryKey:["patients"],queryFn:async()=>(await h.default.get("/api/patient")).data}),r=(()=>{let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:async a=>{let b=await fetch("/api/patient",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(401===b.status)throw Error("Authentication required. Please log in again.");if(!b.ok)throw Error((await b.json()).error||"Failed to create patient");return b.json()},onSuccess:()=>{a.invalidateQueries({queryKey:["patients"]}),g.default.success("Patient added successfully")},onError:a=>{g.default.error(a.message||"Failed to add patient")}})})(),s=function(){let a=(0,f.useQueryClient)();return(0,e.useMutation)({mutationFn:async a=>(await h.default.put(`/api/patient?id=${a.id}`,{name:a.name,contact:a.contact,gender:a.gender,birthDate:a.age?new Date(new Date().setFullYear(new Date().getFullYear()-a.age)).toISOString().split("T")[0]:void 0})).data,onSuccess:()=>{g.default.success("Patient updated successfully"),a.invalidateQueries({queryKey:["patients"]})},onError:a=>{g.default.error("Failed to update patient")}})}();return(0,b.jsxs)("div",{className:"flex flex-col gap-8 m-6",children:[(0,b.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-4xl font-semibold text-gray-700",children:"Patients"}),(0,b.jsx)("p",{className:"text-xl text-muted-foreground",children:"Manage patient records and information"})]}),(0,b.jsx)(i.Button,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{m(null),j(!0)},children:"+ Add Patient"})]}),p&&(0,b.jsx)("div",{className:"text-gray-600",children:"Loading..."}),q&&(0,b.jsxs)("div",{className:"text-red-500",children:["Error loading patients: ",q.message]}),o&&(0,b.jsx)(n,{patients:o,onEdit:a=>{m(a),j(!0)}}),a&&(0,b.jsx)(k,{patient:l||{id:"",name:"",firstName:"",lastName:"",age:0,gender:"",contact:"",phone:"",email:"",birthDate:"",conditions:[],allergies:[],medications:[],immunizations:[],lastVisit:"",status:"Active"},onClose:()=>{j(!1),m(null)},onSubmit:l?a=>{l&&s.mutate({...a,id:l.id},{onSuccess:()=>{m(null),j(!1),g.default.success("Patient updated successfully")},onError:a=>{g.default.error(a.message||"Error updating patient")}})}:a=>{r.mutate(a,{onSuccess:()=>{j(!1),g.default.success("Patient added successfully")},onError:a=>{g.default.error(a.message||"Error adding patient")}})}})]})}}];

//# sourceMappingURL=%5Broot-of-the-server%5D__301d5fd8._.js.map