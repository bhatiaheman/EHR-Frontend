(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,24959,e=>{"use strict";e.s(["default",()=>x],24959);var t=e.i(43476),a=e.i(71645),s=e.i(66027),i=e.i(54616),l=e.i(12598),n=e.i(5766),r=e.i(81949),d=e.i(67881),c=e.i(23750);function o(e){let{patient:s,onClose:i,onSubmit:l}=e,[n,r]=(0,a.useState)({...s,firstName:s.name.split(" ").slice(0,-1).join(" ")||"",lastName:s.name.split(" ").pop()||"",birthDate:s.birthDate||"",phone:s.phone||"",email:s.email||"",conditions:[],allergies:[],medications:[],immunizations:[],lastVisit:"",status:s.status||"Active"}),[o,u]=(0,a.useState)({});return(0,t.jsx)("div",{className:"fixed inset-0 bg-black/30 flex items-center justify-center z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg w-[90%] max-w-md p-6 relative",children:[(0,t.jsx)(d.Button,{className:"absolute top-3 right-3 text-gray-500 hover:text-gray-700",onClick:i,variant:"ghost",children:"X"}),(0,t.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-4",children:s.id?"".concat(s.name," Details"):"Add Patient"}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-medium text-gray-600",children:"First Name"}),(0,t.jsx)(c.Input,{type:"text",value:n.firstName,onChange:e=>r({...n,firstName:e.target.value}),className:"border rounded px-2 py-1 w-full"}),o.firstName&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:o.firstName})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-medium text-gray-600",children:"Last Name"}),(0,t.jsx)(c.Input,{type:"text",value:n.lastName,onChange:e=>r({...n,lastName:e.target.value}),className:"border rounded px-2 py-1 w-full"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-medium text-gray-600",children:"Birth Date"}),(0,t.jsx)(c.Input,{type:"date",value:n.birthDate,onChange:e=>r({...n,birthDate:e.target.value}),className:"border rounded px-2 py-1 w-full"}),o.birthDate&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:o.birthDate})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-medium text-gray-600",children:"Gender"}),(0,t.jsxs)("select",{value:n.gender,onChange:e=>r({...n,gender:e.target.value}),className:"border rounded px-2 py-1 w-full",children:[(0,t.jsx)("option",{value:"",children:"Select..."}),(0,t.jsx)("option",{value:"male",children:"Male"}),(0,t.jsx)("option",{value:"female",children:"Female"}),(0,t.jsx)("option",{value:"other",children:"Other"}),(0,t.jsx)("option",{value:"unknown",children:"Unknown"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-medium text-gray-600",children:"Phone"}),(0,t.jsx)(c.Input,{type:"text",value:n.phone,onChange:e=>r({...n,phone:e.target.value}),className:"border rounded px-2 py-1 w-full",placeholder:"e.g., 202-555-0123"}),o.phone&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:o.phone})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"font-medium text-gray-600",children:"Email"}),(0,t.jsx)(c.Input,{type:"text",value:n.email,onChange:e=>r({...n,email:e.target.value}),className:"border rounded px-2 py-1 w-full",placeholder:"e.g., john.doe@hospital.com"}),o.email&&(0,t.jsx)("p",{className:"text-red-500 text-sm",children:o.email})]})]}),(0,t.jsx)(d.Button,{className:"mt-4 bg-blue-500 hover:bg-blue-600 text-white",onClick:()=>{(()=>{let e={};return n.firstName?n.firstName.length>100&&(e.firstName="First name must be 100 characters or less"):e.firstName="First name is required",n.phone&&!/^\d{3}-\d{3}-\d{4}$/.test(n.phone)&&(e.phone="Phone must be in format XXX-XXX-XXXX (e.g., 202-555-0123)"),n.email&&!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(n.email)&&(e.email="Email must be a valid address (e.g., name@domain.com)"),n.birthDate||(e.birthDate="Birth date is required"),u(e),0===Object.keys(e).length})()&&l({...n,name:"".concat(n.firstName," ").concat(n.lastName).trim(),contact:n.phone||n.email||"",age:n.birthDate?new Date().getFullYear()-new Date(n.birthDate).getFullYear():0,conditions:[],allergies:[],medications:[],immunizations:[],lastVisit:""})},children:s.id?"Update":"Add"})]})})}var u=e.i(50719),m=e.i(22016);function h(e){let{patients:s,onEdit:i}=e,[l,n]=(0,a.useState)(1),r=Math.ceil(s.length/10),d=(l-1)*10,c=s.slice(d,d+10);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"overflow-x-auto border rounded-lg shadow-md",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-100",children:(0,t.jsx)("tr",{children:["ID","Name","Age","Gender","Contact","Actions"].map(e=>(0,t.jsx)("th",{className:"px-4 py-2 text-left text-gray-700 uppercase text-sm font-medium",children:e},e))})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:c.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsx)("td",{className:"px-4 py-2",children:e.id}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)(m.default,{href:"/dashboard/patients/".concat(e.id),className:"text-blue-600 hover:underline",children:e.name})}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.age}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.gender}),(0,t.jsx)("td",{className:"px-4 py-2",children:e.contact}),(0,t.jsx)("td",{className:"px-4 py-2",children:(0,t.jsx)(u.HiOutlineEye,{size:22,className:"cursor-pointer text-gray-600 hover:text-blue-500",onClick:()=>i(e)})})]},e.id))})]})}),(0,t.jsxs)("div",{className:"flex justify-between items-center mt-4",children:[(0,t.jsxs)("p",{className:"text-sm text-gray-600",children:["Showing ",d+1,"â€“",Math.min(d+10,s.length)," of"," ",s.length]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{disabled:1===l,onClick:()=>n(e=>e-1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Prev"}),Array.from({length:r},(e,a)=>(0,t.jsx)("button",{onClick:()=>n(a+1),className:"px-3 py-1 border rounded ".concat(l===a+1?"bg-blue-500 text-white":""),children:a+1},a)),(0,t.jsx)("button",{disabled:l===r,onClick:()=>n(e=>e+1),className:"px-3 py-1 border rounded disabled:opacity-50",children:"Next"})]})]})]})}let x=()=>{let[e,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),{data:x,isLoading:p,error:g}=(0,s.useQuery)({queryKey:["patients"],queryFn:async()=>(await r.default.get("/api/patient")).data}),j=(()=>{let e=(0,l.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>{let t=await fetch("/api/patient",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(401===t.status)throw Error("Authentication required. Please log in again.");if(!t.ok)throw Error((await t.json()).error||"Failed to create patient");return t.json()},onSuccess:()=>{e.invalidateQueries({queryKey:["patients"]}),n.default.success("Patient added successfully")},onError:e=>{n.default.error(e.message||"Failed to add patient")}})})(),y=function(){let e=(0,l.useQueryClient)();return(0,i.useMutation)({mutationFn:async e=>(await r.default.put("/api/patient?id=".concat(e.id),{name:e.name,contact:e.contact,gender:e.gender,birthDate:e.age?new Date(new Date().setFullYear(new Date().getFullYear()-e.age)).toISOString().split("T")[0]:void 0})).data,onSuccess:()=>{n.default.success("Patient updated successfully"),e.invalidateQueries({queryKey:["patients"]})},onError:e=>{n.default.error("Failed to update patient")}})}();return(0,t.jsxs)("div",{className:"flex flex-col gap-8 m-6",children:[(0,t.jsxs)("div",{className:"flex flex-row justify-between items-center",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-4xl font-semibold text-gray-700",children:"Patients"}),(0,t.jsx)("p",{className:"text-xl text-muted-foreground",children:"Manage patient records and information"})]}),(0,t.jsx)(d.Button,{className:"bg-blue-600 hover:bg-blue-700 text-white",onClick:()=>{m(null),c(!0)},children:"+ Add Patient"})]}),p&&(0,t.jsx)("div",{className:"text-gray-600",children:"Loading..."}),g&&(0,t.jsxs)("div",{className:"text-red-500",children:["Error loading patients: ",g.message]}),x&&(0,t.jsx)(h,{patients:x,onEdit:e=>{m(e),c(!0)}}),e&&(0,t.jsx)(o,{patient:u||{id:"",name:"",firstName:"",lastName:"",age:0,gender:"",contact:"",phone:"",email:"",birthDate:"",conditions:[],allergies:[],medications:[],immunizations:[],lastVisit:"",status:"Active"},onClose:()=>{c(!1),m(null)},onSubmit:u?e=>{u&&y.mutate({...e,id:u.id},{onSuccess:()=>{m(null),c(!1),n.default.success("Patient updated successfully")},onError:e=>{n.default.error(e.message||"Error updating patient")}})}:e=>{j.mutate(e,{onSuccess:()=>{c(!1),n.default.success("Patient added successfully")},onError:e=>{n.default.error(e.message||"Error adding patient")}})}})]})}}]);